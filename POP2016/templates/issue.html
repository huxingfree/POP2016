<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>POP - 工单</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="连接代码托管与应用引擎，为程序员搭建完整的在线编程平台">
<meta name="keywords" content="在线开发,代码托管,应用引擎">
<meta name="author" content="mass">
<link href="../static/lib/bootstrap-3.3.5-dist/css/bootstrap.min.css"
	rel="stylesheet">
<link href="../static/lib/font-awesome-4.3.0/css/font-awesome.min.css"
	rel="stylesheet">
<link href="../static/custom/css/console.css" rel="stylesheet">
<link rel="icon" href="/pages/favicon.ico">
  <style type="text/css">
        div.panel, div.page-header {
            width: 75%;
            margin-left: auto;
            margin-right: auto;
        }
        th, td {
            text-align: center;
        }
    </style>
</head>
<body>
	<div class="navbar navbar navbar-inverse navbar-fixed-top">
		<div class="container">
			<div class="navbar-header">
				<a class="navbar-brand hidden-sm" href="/console">POP在线编程平台</a>
			</div>
			<div class="navbar-collapse collapse">
				<ul class="nav navbar-nav">
					<li><a href="#create" data-toggle="modal">新建工单</a></li>
				</ul>
				<ul class="nav navbar-nav navbar-right">
					<li class="dropdown"><a href="#" class="dropdown-toggle"
						id="username" data-toggle="dropdown">{{ username }}<span
							class="caret"></span></a>
						<ul class="dropdown-menu">
							<li><a href="#">使用说明</a></li>
							<li><a href="#">常见问题</a></li>
							<li><a href="#">意见反馈</a></li>
							<li class="divider"></li>
							<li><a href="http://123.57.2.1:80/account">账号设置</a></li>
						</ul></li>
					<li><a href="http://123.57.2.1:80/logout" id="logout"><i
							class="fa fa-power-off"></i></a></li>
				</ul>
			</div>
		</div>
	</div>
	
	<div class="panel panel-info">
    	<div class="panel-heading">
        	<h4>工单列表</h4>
    	</div>

    	<table class="table table-striped table-hover" id="issue_table">
	        <tr>
	            <th>工单编号</th>
	            <th>问题类型</th>
	            <th>问题标题</th>
	            <th>状态</th>
	            <th>提交时间</th>
	            <th>操作</th>
	        </tr>

	        {% for issue in issues %}
	        <tr id="{{ issue.issueid }}">
	            <td><a href="/detail?issueid={{ issue.id }}">{{ issue.id }}</a></td>
	            <td>{{ issue.issue_type }}</td>
	            <td>{{ issue.issue_head }}</td>
	            <td>{{ issue.state }}</td>
	            <td>{{ issue.create_time }}</td>
	            <td>
	            	<a href="/detail?issueid={{ issue.id }}">查看</a>|<a href="/check?issueid={{ issue.id }}">确认</a>|<a href="/delete?issueid={{ issue.id }}">删除</a>
	            </td>
	        </tr>
	         {% endfor %}
	    </table>
	</div>
	<div class="col-md-2">
		<div class="selector">
			<ul class="nav nav-pills nav-stacked nav-pills-stacked-example">
				<li class="active"><a href="/list">所有工单</a></li>
				<li><a href="/unsolved">待解决工单</a></li>
				<li><a href="/solved">已解决工单</a></li>
			</ul>
		</div>
	</div>

	<!-- 新建工单 -->
	<div class="modal fade" id="create">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">
						<span>&times;</span>
					</button>
					<h4 class="modal-title">新建工单</h4>
				</div>

				
				<form action="/create" class="form-horizontal create-form" enctype="multipart/form-data" method="post">
					<div class="modal-body">
						<div class="form-group">
							<label for="type" class="col-sm-2 control-label">问题类型*</label>
							<!-- 问题类型-->
							<div class="col-sm-10">
								<select class="form-control" id="type" name="type"  required autofocus>
								<option value="开发" selected>开发</option>
								<option value="编译">编译</option>
								<option value="调试">调试</option>
								<option value="运行">运行</option>
								<option value="其他">其他</option>
							</select>
							</div>

						</div>

						<div class="form-group">
							<label for="head" class="col-sm-2 control-label">问题标题*</label>
							<!-- 问题标题-->
							<div class="col-sm-10">
								<input type="text" id="head" name="head"
									class="col-sm-10 form-control" placeholder="标题长度限制为30字" required autofocus>
							</div>
						</div>

						<div class="form-group">
							<label for="body" class="col-sm-2 control-label">问题描述*</label>
							<!-- 问题描述-->
							<div class="col-sm-10">
								<textarea type="text" id="body" name="body"
									class="col-sm-10 form-control" placeholder="请详细描述问题" required autofocus>
								</textarea>
							</div>
						</div>

						 <div class="form-group">
                    		<label for="atta" class="col-sm-2 control-label">图片附件</label>
                    		<div class="col-sm-10">
                        		<input type="file" id="atta" name="atta" class="col-sm-10 form-control">
                    		</div>
                		</div>

                		<div class="form-group">
							<label for="email" class="col-sm-2 control-label">联系邮箱*</label>
							<!-- 联系邮箱-->
							<div class="col-sm-10">
								<input type="text" id="email" name="email"
									class="col-sm-10 form-control" placeholder="请输入联系邮箱" required autofocus>
							</div>
						</div>
					</div>
					<div class="modal-footer">
						<input name="rst" type="reset" hidden>
						<button type="submit" class="btn btn-primary create-btn"
							data-loading-text="创建中，请稍等...">创建</button>
					</div>
				</form>
			</div>
		</div>
	</div>

	<script src="/static/lib/jquery/jquery-1.9.1.min.js"></script>
	<script src="/static/lib/bootstrap-3.3.5-dist/js/bootstrap.min.js"></script>
	<script src="/static/lib/jquery/jquery.cookie.js"></script>
	<script src="/static/custom/js/issue.js"></script>
</body>
</html>